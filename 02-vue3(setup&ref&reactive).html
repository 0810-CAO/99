<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>setup&ref&reactive</title>
    <style>
      body {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
      }
      p {
        display: flex;
        width: 550px;
        height: 150px;
        border-radius: 30px;
        border: 1px solid #000;
        text-align: center;
        align-items: center;
      }
    </style>
  </head>
  <body>
    <h2>setup</h2>
    <ul>
      <li>setup在beforecreate钩子之前完成的</li>
      <li>1、setup</li>
      <li>
        2、beforeCreate:
        表示组件刚刚被创建出来，组件的data和methods还没有初始化好
      </li>
      <li>3、created: data和methods已经初始化好</li>
      <li>
        *由于在执行setup函数的时候，还没有执行beforecreate生命周期方法，所以在setup函数中，是无法使用data和methods
      </li>
      <li>
        *由于我们不能在setup函数中无法使用data和methods，所以Vue为了避免我们错误的使用，它直接将函数中的this修改成了undefined
      </li>
      <li>*setup函数只能是同步的，不能是异步的</li>
    </ul>
    <h2>ref</h2>
    <ul>
      <li>ref和reactive一样，也是用来实现响应式数据的方法</li>
      <li>
        由于reactive必须传递一个对象，所以导致在企业开发中如果我们只想让某个变量实现响应式的时候会非常麻烦，所以Vue3就给我们提供了ref方法，实现对简单值的监听
      </li>
      <li>
        ref本质其实还是reactive，ref函数底层会自动根据我们给ref传入的值将它转换成reactive
        ref(xx) -> reactive({value: xx})
      </li>
      <li>
        *通过ref创建的数据，在template中不用通过value获取，vue自动添加;在js中使用ref的值必须通过value获取
      </li>
    </ul>
    <h2>creative</h2>
    <ul>
      <li>
        reactive是Vue3中提供的实现响应式数据的方法
        在Vue2中响应式数据是通过defineProperty来实现的，而在Vue3中响应式数据是通过ES6的Proxy来实现的
      </li>
      <li>reactive参数必须是对象（json/arr）</li>
      <li>如果给reactive传递了其他对象</li>
      <li>
        默认情况下修改对象，界面不会自动更新;如果想更新，可以通过重新赋值的方式
      </li>
    </ul>
    <h2>ref和reactive区别</h2>
    <h3>Vue在处理的时候会先判断数据是什么类型的</h3>
    <ul>
      <li>
        如果在template里面使用的是ref类型的数据，那么Vue会自动帮我们添加.value
      </li>
      <li>
        如果template里使用的是reactive类型的数据，那么Vue不会自动帮我们添加.value
      </li>
    </ul>
    <h3>Vue是如何判断数据类型</h3>
    <ul>
      <li>
        Vue在解析数据之前，会自动判断这个数据是否是ref类型的，如果是就自动添加
        .value如果不是就不自动添加.value
      </li>
      <li>
        通过当前数据的__v_isRef
        来判断，如果有这个私有属性，并且取值为true，那么就代表是一个ref类型的数据
      </li>
    </ul>
    <h3>isRef和isReactive</h3>
    <ul>
      <li>通过isRef和isReactive可以判断数据是ref还是reactive</li>
    </ul>
  </body>
</html>
